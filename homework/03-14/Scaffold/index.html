<!DOCTYPE html>
<html>
<head>
	<title>Remote Work Bubble Chart</title>
	<script src="https://d3js.org/d3.v5.min.js"></script>
	<style>
		.node {
			stroke: #1e00ff;
			stroke-width: 1.5px;
		}
    .link {
      fill: none;
      stroke: #ccc;
      stroke-width: 1.5px;
    }
    .bubble {
      fill: #1f77b4;
      cursor: pointer;
    }
    .active {
      fill: #ff7f0e;
    }
    .inactive {
      fill: #ccc;
    }
	</style>
</head>
<body>
	<h1 style="font-family: Helvetica;">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Remote Work Bubble Chart</h1>
	
	<div id="chart"></div>
	<script>
		 var data = [
      { year: 1976, gender: "Male", policy: 4, howmuchWork: 4, whichDays: 4, allowRemote: 4 },
      { year: 1971, gender: "Male", policy: 3, howmuchWork: 3, whichDays: 3, allowRemote: 4 },
      { year: 1978, gender: "Female", policy: 5, howmuchWork: 3, whichDays: 1, allowRemote: 3 },
      { year: 1962, gender: "Female", policy: 4, howmuchWork: 4, whichDays: 4, allowRemote: 4 },
      { year: 1974, gender: "Male", policy: 5, howmuchWork: 4, whichDays: 5, allowRemote: 4 },
      { year: 1985, gender: "Male", policy: 4, howmuchWork: 4, whichDays: 3, allowRemote: 4 },
      { year: 1973, gender: "Male", policy: 4, howmuchWork: 4, whichDays: 4, allowRemote: 4 },
      { year: 1992, gender: "Female", policy: 4, howmuchWork: 4, whichDays: 3, allowRemote: 4 },
      { year: 1970, gender: "Female", policy: 5, howmuchWork: 5, whichDays: 4, allowRemote: 5 },
      { year: 1981, gender: "Female", policy: 5, howmuchWork: 4, whichDays: 4, allowRemote: 4 }
    ];

    // Filter data by male gender
    data = data.filter(function(d) {
      return d.gender === "Male";
    });

    var width = 800,
      height = 600;

    var svg = d3.select("#chart")
      .append("svg")
      .attr("width", width)
      .attr("height", height);

    var simulation = d3.forceSimulation(data)
      .force("charge", d3.forceManyBody().strength(-15))
      .force("x", d3.forceX(width / 2))
      .force("y", d3.forceY(height / 2))
      .force("collision", d3.forceCollide().radius(function(d) { return d.policy * 10; })
      );

var node = svg.selectAll(".node")
  .data(data)
  .enter()
  .append("circle")
  .attr("class", "node")
  .attr("r", function(d) { return d.policy * 10; })
  .attr("fill", "#1f77b4")
  .on("click", function(d) {
    // Zoom in to the selected bubble
    // and show the data related to Policy, HowmuchWork, WhichDays, and AllowRemote
    console.log("Selected bubble:", d);
  });

var link = svg.selectAll(".link")
  .data(data)
  .enter()
  .append("line")
  .attr("class", "link")
  .attr("stroke", "#ccc")
  .attr("stroke-width", 1)
  .attr("x1", function(d) { return d.policy * 10; })
  .attr("y1", function(d) { return d.policy * 10; })
  .attr("x2", function(d) { return d.policy * 10; })
  .attr("y2", function(d) { return d.policy * 10; });

node.append("title")
  .text(function(d) { return "Policy: " + d.policy + "\n" + "How much work: " + d.howmuchWork + "\n" + "Which days: " + d.whichDays + "\n" + "Allow remote: " + d.allowRemote; });

simulation.on("tick", function() {
  node.attr("cx", function(d) { return d.x; })
    .attr("cy", function(d) { return d.y; });

  link.attr("x1", function(d) { return d.x; })
    .attr("y1", function(d) { return d.y; })
    .attr("x2", function(d) { return d.x; })
    .attr("y2", function(d) { return d.y; });
});
</script>
</body>
</html>